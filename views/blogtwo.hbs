{{>nav}}
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/4.0.0-alpha.14/lib.min.js" integrity="sha512-LTxGQ9e0m5BLj8PqkTeZdQIWBCGt2L1I3dZkprWs3lwsWkiXD1j+o2rttG+40TVOQPUpQC9rykk3RPX9Dny1Bg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<header class="max-w-xl mx-auto mt-20 text-center">
    <h1 class="text-4xl">
        ILuvnet.com <span class="text-blue-500">Lattest Blogs</span>
    </h1>

    <div class="space-y-2 lg:space-y-0 lg:space-x-4 mt-8">
        <!--  Category -->
        <div class="relative flex lg:inline-flex items-center bg-gray-100 rounded-xl">
        <select id="categoryDropdown" class="flex-1 appearance-none bg-transparent py-2 pl-3 pr-9 text-sm font-semibold">
            <option value="" disabled selected>Category</option>
            <option value="home">Home</option>
            <option value="tech">Tech</option>
            <option value="gadgets">Gadgets Reviews</option>
            <option value="finance">Finance</option>
            <option value="movies">Movies</option>
            <option value="lifestyle">Lifestyle</option>
            <option value="news">News and Politics</option>
        </select>


            <svg class="transform -rotate-90 absolute pointer-events-none" style="right: 12px;" width="22" height="22"
                viewBox="0 0 22 22">
                <g fill="none" fill-rule="evenodd">
                    <path stroke="#000" stroke-opacity=".012" stroke-width=".5" d="M21 1v20.16H.84V1z">
                    </path>
                    <path fill="#222" d="M13.854 7.224l-3.847 3.856 3.847 3.856-1.184 1.184-5.04-5.04 5.04-5.04z">
                    </path>
                </g>
            </svg>
        </div>

    </div>
</header>

<main class="max-w-6xl mx-auto mt-6 lg:mt-20 space-y-6">
    <article
        class="transition-colors duration-300 hover:bg-gray-100 border border-black border-opacity-0 hover:border-opacity-5 rounded-xl">
        <div data-id="{{blogData.0.title}}" class="py-6 px-5 lg:flex blog">
            <div class="flex-1 lg:mr-8">
                <img src="{{blogData.0.image}}" alt="{{blogData.0.title}}" class="rounded-xl">
            </div>

            <div class="flex-1 flex flex-col justify-between">
                <header class="mt-8 lg:mt-0">
                    <div class="space-x-2">
                        {{#each blogData.0.tags}}
                        <a href="#"
                            class="px-3 py-1 border border-blue-300 rounded-full text-blue-300 text-xs uppercase font-semibold"
                            style="font-size: 10px">{{this}}</a>
                    {{/each}}
                        
                    </div>

                    <div class="mt-4">
                        <h1 class="text-3xl">
                            {{blogData.0.title}}
                        </h1>

                        <span class="mt-2 block text-gray-400 text-xs">
                            Published <time>{{formatDate blogData.0.date}}</time>
                        </span>
                    </div>
                </header>

                <div class="text-sm mt-2">
                    <p>
                        {{blogData.0.shortDescription}}
                    </p>
                </div>

                <footer class="flex justify-between items-center mt-8">
                    <div class="flex items-center text-sm">
                        <img src="/icons/android-icon-48x48.png" alt="Lary avatar">
                        <div class="ml-3">
                            <h5 class="font-bold">Iluvnet.com</h5>
                            <h6>Written By ILuvNet.com</h6>
                        </div>
                    </div>

                    <div class="hidden lg:block">
                        <a href="/blogview/{{changeSpacesToDash blogData.0.title}}"
                            class="transition-colors duration-300 text-xs font-semibold bg-gray-200 hover:bg-gray-300 rounded-full py-2 px-8">Read
                            More</a>
                    </div>
                </footer>
            </div>
        </div>
    </article>

    <div class="lg:grid lg:grid-cols-2">
        <article
            class="transition-colors duration-300 hover:bg-gray-100 border border-black border-opacity-0 hover:border-opacity-5 rounded-xl">
            <div data-id="{{blogData.1.title}}" class="py-6 px-5 blog">
                <div>
                    <img src="{{blogData.1.image}}" alt="{{blogData.1.title}}" class="rounded-xl">
                </div>

                <div class="mt-8 flex flex-col justify-between">
                    <header>
                        <div class="space-x-2">
                            {{#each blogData.1.tags}}
                            <a href="#"
                                class="px-3 py-1 border border-blue-300 rounded-full text-blue-300 text-xs uppercase font-semibold"
                                style="font-size: 10px">{{this}}</a>
                                {{/each}}

                        </div>

                        <div class="mt-4">
                            <h1 class="text-3xl">
                               {{blogData.1.title}}
                            </h1>

                            <span class="mt-2 block text-gray-400 text-xs">
                                Published <time>{{formatDate blogData.1.date}}</time>
                            </span>
                        </div>
                    </header>

                    <div class="text-sm mt-4">
                        <p>
                           {{blogData.1.shortDescription}}
                        </p>

                    </div>

                    <footer class="flex justify-between items-center mt-8">
                        <div class="flex items-center text-sm">
                            <img src="/icons/android-icon-48x48.png" alt="Lary avatar">
                            <div class="ml-3">
                                <h5 class="font-bold">Iluvnet.com</h5>
                                <h6>Written By ILuvNet.com</h6>
                            </div>
                        </div>

                        <div>
                            <a href="/blogview/{{changeSpacesToDash blogData.1.title}}"
                                class="transition-colors duration-300 text-xs font-semibold bg-gray-200 hover:bg-gray-300 rounded-full py-2 px-8">
                                Read More
                            </a>
                        </div>
                    </footer>
                </div>
            </div>
        </article>

        <article
            class="transition-colors duration-300 hover:bg-gray-100 border border-black border-opacity-0 hover:border-opacity-5 rounded-xl">
            <div  data-id="{{blogData.2.title}}" class="py-6 px-5 blog">
                <div>
                    <img src="{{blogData.2.image}}" alt="{{blogData.2.title}}" class="rounded-xl">
                </div>

                <div class="mt-8 flex flex-col justify-between">
                    <header>
                        <div class="space-x-2">
                            {{#each blogData.2.tags}}
                            <a href="#"
                                class="px-3 py-1 border border-blue-300 rounded-full text-blue-300 text-xs uppercase font-semibold"
                                style="font-size: 10px">{{this}}</a>
{{/each}}
                       
                        </div>

                        <div class="mt-4">
                            <h1 class="text-3xl">
                                {{blogData.2.title}}
                            </h1>

                            <span class="mt-2 block text-gray-400 text-xs">
                                Published <time>{{formatDate blogData.2.date}}</time>
                            </span>
                        </div>
                    </header>

                    <div class="text-sm mt-4">
                        <p>
                            {{blogData.2.shortDescription}}
                        </p>

                        
                    </div>

                    <footer class="flex justify-between items-center mt-8">
                        <div class="flex items-center text-sm">
                            <img src="/icons/android-icon-48x48.png" alt="Lary avatar">
                            <div class="ml-3">
                                <h5 class="font-bold">Iluvnet.com</h5>
                                <h6>Written By ILuvNet.com</h6>
                            </div>
                        </div>

                        <div>
                            <a href="/blogview/{{changeSpacesToDash blogData.2.title}}"
                                class="transition-colors duration-300 text-xs font-semibold bg-gray-200 hover:bg-gray-300 rounded-full py-2 px-8">
                                Read More
                            </a>
                        </div>
                    </footer>
                </div>
            </div>
        </article>
    </div>

    <div class="lg:grid lg:grid-cols-3 blog-container">
        {{#each arrayWithSkippedItems}}
        <article
            class="blog-item  transition-colors duration-300 hover:bg-gray-100 border border-black border-opacity-0 hover:border-opacity-5 rounded-xl">
            <div  data-id="{{this.title}}" class="py-6 px-5 blog">
                <div>
                    <img src="{{this.image}}" alt="{{this.title}}" class="rounded-xl">
                </div>

                <div class="mt-8 flex flex-col justify-between">
                    <header>
                        <div class="space-x-2">
                            {{#each this.tags}}
                            <a href="#"
                                class="px-3 py-1 border border-blue-300 rounded-full text-blue-300 text-xs uppercase font-semibold"
                                style="font-size: 10px">{{this}}</a>
                                {{/each}}
                            
                        </div>

                        <div class="mt-4">
                            <h1 class="text-3xl">
                                {{this.title}}
                            </h1>

                            <span class="mt-2 block text-gray-400 text-xs">
                                Published <time>{{formatDate this.date}}</time>
                            </span>
                        </div>
                    </header>

                    <div class="text-sm mt-4">
                        <p>
                            {{this.shortDescription}}
                        </p>

                    </div>

                    <footer class="flex justify-between items-center mt-8">
                        <div class="flex items-center text-sm">
                            <img src="/icons/android-icon-48x48.png" alt="avatar">
                            <div class="ml-3">
                                <h5 class="font-bold">Iluvnet.com</h5>
                                <h6>Written By ILuvNet.com</h6>
                            </div>
                        </div>

                        <div>
                            <a href="/blogview/{{changeSpacesToDash this.title}}"
                                class="transition-colors duration-300 text-xs font-semibold bg-gray-200 hover:bg-gray-300 rounded-full py-2 px-8">Read
                                More</a>
                        </div>
                    </footer>
                </div>
            </div>
        </article>

        {{/each}}

    </div>
</main>
<div class="flex justify-center mt-8">
    <button id="loadMoreBtn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-700 cursor-pointer">
        Load More
    </button>
</div>
</section>

<br>

{{>footer}}


<script>
 let blog  = document.querySelectorAll('.blog')

document.getElementById('loadMoreBtn').addEventListener('click', function() {
    const currentCount = document.querySelectorAll('.blog-item').length; // Count of currently displayed blog items
    const limit = 9; // Number of items to fetch per request

    fetch(`/blog?skip=${currentCount}&limit=${limit}`, {
        method: 'GET',
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.text();
    })
    .then(data => {
        console.log(data)
        const parser = new DOMParser();
        const newBlogItems = parser.parseFromString(data, 'text/html').querySelectorAll('.blog-item');
        if(newBlogItems.length === 0) {
            document.getElementById('loadMoreBtn').style.display = 'none';
        }
        const blogContainer = document.querySelector('.blog-container');
        newBlogItems.forEach(item => {
            blogContainer.appendChild(item); // Append the new blog items to the container
        });
        blog  = document.querySelectorAll('.blog')
    })
    .catch(error => {
        console.error('Error fetching blog data:', error);
    });
});



    blog.forEach((blog) => {
        blog.addEventListener('click', () => {
            const id = blog.getAttribute('data-id')
            let query = id.replace(/-/g, '@').replace(/\?/g, 'qmark').replace(/ /g, '-').replace(/%/g, 'percentage')
            window.location.href = `/blogview/${query}`
        })
    })

document.getElementById("categoryDropdown").addEventListener("change", function() {
    var selectedOption = this.value;
    if (selectedOption !== "") {
      
        switch (selectedOption) {
            case "tech":
                window.location.href = "/blog/category/tech";
                break;
            case "gadgets":
                window.location.href = "/blog/category/gadgets-reviews";
                break;
            case "finance":
                window.location.href = "/blog/category/finance";
                break;
            case "movies":
                window.location.href = "/blog/category/movies";
                break;
            case "lifestyle":
                window.location.href = "/blog/category/life-style";
                break;
            case "news":
                window.location.href = "/blog/category/news";
            case "home":
                window.location.href = "/blog";
            default:
                break;
        }
    }
});


    
</script>